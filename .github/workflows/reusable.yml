name: validator

on:
  workflow_dispatch:
  workflow_call:
    inputs:
      input_var:
        required: true
        type: string

jobs:
  run-script:
    runs-on: ubuntu-latest
    permissions:  # Ensure the workflow has read access to its own repo
      contents: read

    steps:
      # Step 1: Check out the reusable workflow's repository
      - name: Checkout reusable repository
        uses: actions/checkout@v3
        with:
          repository: ${{ github.repository }}  # Ensures the current reusable repo is checked out
          ref: main  # Replace with the branch containing this workflow

      # Step 2: Debug: Verify the directory and files
      - name: List files
        run: ls -R

      # Step 3: Run the Python script
      - name: Execute Python script
        run: python3 validate.py "${{ inputs.input_var }}"
